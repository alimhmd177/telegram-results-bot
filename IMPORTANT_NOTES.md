# ملاحظات مهمة للنشر

## المشكلة التي واجهناها

عند اختبار البوت، واجهنا مشكلة في تسجيل الدخول. تم حلها بتصحيح أسماء حقول النموذج:

- ❌ **خطأ**: `user` و `pass`
- ✅ **صحيح**: `username` و `password` و `action=login`

## الحل المطبق

تم تحديث جميع ملفات scraper لاستخدام الحقول الصحيحة:

```python
login_data = {
    'action': 'login',
    'username': student_id,
    'password': password,
    'submit': 'دخول'
}
```

## ملاحظات حول Railway

### 1. Selenium على Railway

البوت يستخدم Selenium لأن الموقع يحمل البيانات ديناميكياً بواسطة JavaScript. تم إضافة جميع المكتبات المطلوبة في `nixpacks.toml`.

### 2. متغيرات البيئة المطلوبة

يجب إضافة متغير واحد فقط في Railway:

```
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

### 3. الوقت المتوقع للنشر

- أول نشر: 5-10 دقائق (بسبب تثبيت Chrome)
- النشر التالي: 2-3 دقائق

### 4. استهلاك الموارد

- الذاكرة: ~200-300 MB
- CPU: منخفض (يرتفع عند استخدام Selenium)
- الخطة المجانية كافية للاستخدام المعتدل

## استكشاف الأخطاء المحتملة

### خطأ: "ChromeDriver not found"

**السبب**: لم يتم تثبيت Chrome بشكل صحيح

**الحل**:
1. تأكد من وجود ملف `nixpacks.toml`
2. تحقق من السجلات في Railway
3. قد تحتاج إلى إعادة النشر

### خطأ: "فشل تسجيل الدخول"

**السبب**: الموقع قد يكون معطلاً أو تغيرت آلية تسجيل الدخول

**الحل**:
1. تحقق من أن الموقع يعمل: http://212.0.143.242/portal/students/
2. راجع السجلات للحصول على تفاصيل الخطأ
3. قد تحتاج إلى تحديث أسماء الحقول

### خطأ: "Timeout"

**السبب**: الموقع بطيء أو الاتصال ضعيف

**الحل**:
- زيادة وقت الانتظار في `scraper_selenium.py`
- تحقق من حالة الشبكة

## نصائح للتطوير المستقبلي

1. **إضافة قاعدة بيانات**: لتخزين بيانات الطلاب وتقليل الطلبات للموقع
2. **إضافة Webhook**: بدلاً من polling لتحسين الأداء
3. **إضافة Cache**: لتخزين النتائج مؤقتاً
4. **إضافة إشعارات**: عند ظهور نتائج جديدة

## الدعم

إذا واجهت مشاكل:
1. راجع السجلات في Railway (Logs tab)
2. تحقق من أن التوكن صحيح
3. تأكد من أن الموقع يعمل
4. جرب تسجيل الدخول يدوياً للتأكد من البيانات

